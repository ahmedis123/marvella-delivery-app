# نظام إدارة طلبات التوصيل - Marvella

هذا المشروع هو تطبيق ويب مبني باستخدام Flask و SQLAlchemy لإدارة طلبات التوصيل لشركة "Marvella Fashion"، وهي خدمة متخصصة في شراء وتوصيل المنتجات من المتاجر السعودية إلى جميع ولايات السودان.

تم تصميم النظام ليكون أداة بسيطة وقوية لمديرة المشروع، مما يسهل عليها تتبع الطلبات، إدارة المدفوعات، وإنشاء فواتير احترافية.

---

## ✨ الميزات الرئيسية

-   **لوحة تحكم شاملة:** عرض جميع الطلبات مع إمكانية البحث والفلترة المتقدمة.
-   **إدارة كاملة للطلبات:** إضافة، تعديل، وحذف الطلبات ومنتجاتها بسهولة.
-   **نظام فواتير PDF:** إنشاء وتحميل فواتير احترافية بتنسيق PDF بضغطة زر، مع اسم العميل والتاريخ والشعار.
-   **إحصائيات الأداء:** صفحة خاصة لعرض ملخصات مرئية للإيرادات، عدد الطلبات، ومتوسط قيمة الطلب.
-   **إدارة النظام:**
    -   **نسخ احتياطي تلقائي:** يقوم النظام بإنشاء نسخة احتياطية من قاعدة البيانات يومياً بشكل تلقائي.
    -   **إدارة يدوية للنسخ الاحتياطي:** إمكانية إنشاء، تحميل، ورفع واستعادة النسخ الاحتياطية من واجهة المستخدم.
-   **نظام تسجيل دخول آمن:** حماية الوصول إلى لوحة التحكم.

---

## 🛠️ التقنيات المستخدمة

-   **الواجهة الخلفية (Backend):** Python, Flask, SQLAlchemy
-   **قاعدة البيانات (Database):** SQLite
-   **إنشاء PDF:** WeasyPrint
-   **جدولة المهام (Scheduling):** APScheduler
-   **الواجهة الأمامية (Frontend):** HTML, Bootstrap 5, JavaScript

---

## 🚀 كيفية الإعداد والتشغيل

لتشغيل هذا المشروع على جهازك المحلي، اتبع الخطوات التالية:

### 1. المتطلبات الأساسية

-   Python 3.8+
-   pip (مدير حزم بايثون)
-   Git (اختياري، للنسخ من GitHub)

### 2. تثبيت المشروع

أولاً، قم بنسخ المستودع إلى جهازك:

```bash
git clone https://github.com/your-username/marvella-delivery-app.git
cd marvella-delivery-app
```

### 3. تثبيت المكتبات المطلوبة

قم بإنشاء بيئة افتراضية (ممارسة موصى بها) وقم بتثبيت المكتبات اللازمة من ملف `requirements.txt`.

```bash
# إنشاء وتفعيل بيئة افتراضية (مثال على Linux/macOS)
python3 -m venv venv
source venv/bin/activate

# تثبيت المكتبات
pip install -r requirements.txt
```

**ملاحظة لمستخدمي Termux:** قد تحتاج إلى تثبيت بعض الحزم الإضافية لتشغيل `WeasyPrint` بشكل صحيح.

### 4. تجهيز الملفات الثابتة

قبل تشغيل التطبيق لأول مرة، تأكد من إنشاء مجلد `static` ووضع الملفات التالية بداخله:

-   `static/logo.png`: شعار الشركة الذي سيظهر في الفاتورة.
-   `static/Cairo-Regular.ttf`: ملف الخط العادي.
-   `static/Cairo-Bold.ttf`: ملف الخط العريض.

### 5. تشغيل التطبيق

الآن، يمكنك تشغيل التطبيق:

```bash
python app.py
```

-   سيقوم التطبيق عند أول تشغيل بإنشاء قاعدة البيانات (`app_v7.db`) داخل مجلد `instance`.
-   سيتم أيضاً إنشاء مستخدم افتراضي:
    -   **اسم المستخدم:** `admin`
    -   **كلمة المرور:** `admin_password`
-   يمكنك الآن الوصول إلى التطبيق من خلال المتصفح على العنوان: `http://127.0.0.1:5000`

---

## 🗂️ هيكل المشروع

```
marvella-delivery-app/
│
├── app.py              # الملف الرئيسي الذي يحتوي على كل كود التطبيق
├── requirements.txt    # قائمة المكتبات المطلوبة للمشروع
├── .gitignore          # ملف لتحديد الملفات التي يجب أن يتجاهلها Git
├── README.md           # هذا الملف
│
├── static/             # مجلد للملفات الثابتة (CSS, JS, Fonts, Images)
│   ├── logo.png
│   ├── Cairo-Regular.ttf
│   └── Cairo-Bold.ttf
│
├── instance/           # (سيتم إنشاؤه تلقائياً) مجلد لقاعدة البيانات
│   └── app_v7.db
│
└── backups/            # (سيتم إنشاؤه تلقائياً) مجلد لحفظ النسخ الاحتياطية
```

---

## 📈 التحسينات المستقبلية المقترحة

-   [ ] إضافة صفحة لتغيير كلمة المرور.
-   [ ] تطبيق نظام صلاحيات للمستخدمين (Admin, Data Entry).
-   [ ] إنشاء قاعدة بيانات للمنتجات لتسريع عملية الإدخال.
-   [ ] تحسين واجهة الإحصائيات باستخدام رسوم بيانية تفاعلية.
-   [ ] نشر التطبيق على خدمة استضافة سحابية.
